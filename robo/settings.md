1Итак, скачиваем Visual Studio code с официального сайта https://code.visualstudio.com/, выбрав версию, соответствующую нашей ОС. В моем случае это версия под

64 разрядную версию Windows и запускаем установщик. Опции предлагаемые установщиком по умолчанию нас вполне устраивают.

Настройка редактора:

Запустим редактор, и пропустим приветственное окно. Внизу на панели действий шестерёнка, нажав на которую выберем пункт Settings, далее справа ввреху можно нажать

на иконку open settings.JSON и открыть файл с настройками IDE settings.JSON, в который внесем все необходимые настройки, отличные от базовых:
```
{

"extensions.autoCheckUpdates": false,

"update.enableWindowsBackgroundUpdates": false,

"extensions.autoUpdate": false,

"update.showReleaseNotes": false,

"update.mode": "none",

"debug.inlineValues": "on",

"debug.autoExpandLazyVariables": true,

"editor.minimap.enabled": false,

"workbench.colorTheme": "Monokai",

"terminal.integrated.cursorStyle": "line",

"terminal.integrated.cursorBlinking": true,

"window.commandCenter": false,

"workbench.startupEditor": "none",

"files.autoSave": "afterDelay",

"explorer.autoReveal": false,

"explorer.compactFolders": false,

"breadcrumbs.enabled": false,

"terminal.integrated.defaultProfile.windows": "Command Prompt"

}
```

Первый блок - отключим автообновление IDE, когда понадобится обновить редактор это легко сделать вручную.
Далее - Minimap. Это схема документа справа, для удобства я ее отключаю, чтобы получить больше рабочего пространства.
Затем строка "workbench.colorTheme": "Monokai" устанавливает рабочую тему Monokai.
Далее идут настройки терминала - зесь меняем вид курсора, вместо кравдарта устанавливаю мигающую линию,
также вместо проблемного PowerShell использую стандартную командную строку Windows(чтобы не заниматься настройками правил безопасности для неподписанных скриптов):
"terminal.integrated.defaultProfile.windows": "Command Prompt"
Убираем стартовое окно и командный центр вверху экрана.
Включаю автосохранение файлов: "files.autoSave": "afterDelay"
Настраиваю отображение папок в навигационной панели: "explorer.autoReveal": false, "explorer.compactFolders": false
В общих настройках отключаем хлебные крошки(вверху подсказка, показывающая путь к файлу)
Это все что касается базовых настроек IDE. 
Сохраняю файл settings.JSON. Также можно сохранить его где-нибудь отдельно, например на GitHub, чтобы потом при переустановке не прводить повторную настройку.

**Установка и настройка плагинов для Python**
- **Расширение Python от Microsoft** - линтер, отладка, навигация по коду, форматирование кода, рефакторинг и многое другое.
Оно автоматически подтягивает расширение Pylance, которое работает вместе с Python в коде Visual Studio для обеспечения эффективной языковой поддержки.


установили и автоматически установило связанное с ним расширение Пайн для чего оно нужно оно нужно для того чтобы

21:49

обеспечить автокомплит подсказки автодополнение кода автоматический импорт и прочие вещи которые нам нужны

21:56

для работы с питоном То есть например уже установив это расширение Просто оно уже с коробки частично работает то есть

22:03

Почему я говорю частично потому что оно ещё не настроено его не любое расширение почти недостаточно просто установить Ну

22:10

например откроем какой-либо Python файл и Обратите внимание в правом нижнем углу

Выбор интерпретатора и работа с виртуальным окружением

22:17

здесь есть такое скажем так предупреждение то есть выберите интерпретатор то есть питон который

22:23

установлен на компьютере или виртуальное окружение которое есть

22:28

тыкая сюда появляется окошко выбора интерпретатора это нужно для того чтобы во-первых само расширение работало при

22:35

помощи какого-то питона это раз во-вторых ещё и код чтобы редактор знал через какой интерпретатор запускать ваш

22:41

код редактор пока не нашёл никакого питона Хотя у меня их несколько установлено возможно потому что нужно

22:47

было перезагрузиться после установки давайте так и сделаем да после перезагрузки он сразу нашёл первый

22:53

попавшийся питон который был в системе по версии здесь которая правом нижнем

22:58

углу тыкаем и здесь видим он обнаружил два установленных интерпретатора Python

23:05

корневых естественно это 311 и 38 виртуальные окружение которые есть естно

23:12

не находит их нужно найти непосредственно вручную то есть выбираем вести путь интерпретатора и

23:21

найти проводник открывается в пап см

23:26

протом какой-нибудь интерпретатор То есть например виртуальное окружение в

23:32

котором у нас установлена например библиотека Джан Давайте его создадим и установим библиотеку дополнительно сами

23:39

через терминал сейчас допустим у нас такого нет Итак запустим терминал New терминал или Ctrl Shift

23:47

апостроф терминал напоминаю открывается в папке Конкретно где у нас сейчас находится проект виртуальное окружение

23:53

можно создать здесь Но Давайте создадим его на одну директорию выше то есть в папке что для этого нужно записываем команду

24:00

CD то есть chory и здесь записываем вот так две точки и СШ переходим как мы

24:08

видим Теперь мы находимся терминалом не в этой папке с нашим проектом А на одну директорию выше супер и теперь что нам

24:15

нужно во-первых убеждаемся что здесь py нужной версии то есть 311 например или 3.9 Смотря какой у вас установлен и

24:23

здесь пим коман py зде модуль н и записываем имя

24:30

виртуального окружения то есть здесь можно написать что угодно но так чтоб по стандарту НН тыкаем Enter и после того

24:38

как виртуальное окружение создалось мы теперь можем его найти и активировать редактор мог сейчас его обнаружить

24:44

иногда он это делает иногда нет то есть тут бы сейчас было бы всплывающее окошко что новое виртуальное окружение обнаружено Ну в данном случае он его не

24:51

нашёл Давайте его найдём вручную тыкаем сюда Выбрать путь к интерпретатору find

24:57

и здесь переходим на директорию выше так workplace вот он вот оно наше

25:04

виртуальное окружение заходим сюда у тех кто Windows находится в папке scripts у тех кто macos и Linux в папке

25:12

bin и здесь выбираем Python и выбираем

25:17

интерпретатор Итак мы видим на панели состояний здесь происходит реактивация

25:23

терминала для того чтобы потянуть это виртуальное окружение теперь здесь в правом нижнем углу написано и указано

25:28

что это именно виртуальное окружение То есть под названием замечательно теперь

25:34

когда мы запускаем терминал New терминал так как оно у нас здесь активировано то мы видим что здесь в терминале вот оно

25:41

Терминал уже запускается с активированным виртуальным окружением то есть тех кто не поясню на всякий случай

25:46

Если вдруг вы с этим ещё не сталкивались тот корневой Python который установлен

25:52

он скажем так не предназначен для работы с проектами Почему Потому что нужно устанавливать дополнительные библиотеки

25:57

и эти дополнительные библиотеки чтобы не было конфликтов и для того чтобы их потом можно было перечислить в

26:03

специальном файле к проекту чтобы кто-то другой это мог легко установить Итак Главное чтобы не было конфликтов их

26:10

нужно устанавливать куда-то отдельно в изолированную среду поэтому создаются такие виртуальные окружения То есть это

26:16

скажем так мини питон такие изолированные интерпретаторы в которые

26:21

устанавливаются дополнительные компоненты дополнительные библиотеки и при работе с вашим проектом например

26:27

Джан будет браться отсюда а все стандартные это модуль Time OS и так

26:33

далее будут браться из корневого питона потому что вы можете работать на ПК не не за одним проектом А можете работать с

26:40

Джан завтра или послезавтра параллельно или в общем параллельно работать с каким-то другим проектом устанавливаете

26:46

дополнительные зависимости они могут с собой конфликтовать либо по версиям либо по каким-либо другим параметрам поэтому

26:52

Итак всё активировано здесь записываем например команду пакетный менеджер пип

26:58

inst и например так для примера чтобы Дальше можно было настроить расширение

27:03

установлю jang версию 4.2 то 6 вот так Через два равно пока

27:11

устанавливается для примера напомню мы с вами установили что здесь у нас на

27:18

Windows будет работать именно командная строка не powershell Если вы не применяли эту настройку ту которую мы

PowerShell ошибка выполнения неподписанных скриптов

27:23

сделали в работаете здесь в мина через powershell здесь может выскочить

27:29

предупреждение о том что запрещено подпи запрещено выполнять неподписанные

27:35

скрипты чтобы это устранить и вы не хотите переходить на командную строку чтобы это устранить в powershell

27:41

необходимо сделать следующее так Я подготовил файл откроем его здесь в

27:46

редакторе нужно открыть powershell через меню Пуск найти его открыть от имени

27:52

администратора и ввести команду Get execution policy то есть посмотреть какая установлена система выполнения

27:58

скриптов То есть если написано restricted то всё запрещено соответственно Если вы хотите работать

28:04

через powershell это необходимо изменить нужно ввести команду Set execution policy unrestricted То есть все сценарии

28:11

будут выполнены или sign то есть разрешено выполнять только локальные сценарии обе эти опции Должны сработать

28:18

То есть это ошибка когда здесь Красном так написано то есть ни пип не работает

28:24

ни библиотеки не устанавливается ничего не происходит это решается вот таким вот способом супер но рекомендую перейти

28:31

всё-таки на командную строку она и быстрее работает и не вызывает вот этих проблем ничего этого делать не нужно так

28:37

после установки то есть всё подтянулась к нашему проекту пайлан больше не ругается на то что нет такого пакета как

28:44

джан и теперь работает полностью автокот то есть который обеспечивает именно

28:50

пайлан напоминаю мы установили два расширения Python и pance авко именно от

28:55

пайнса идт здесь по мере набирания текста появляются подсказки по модулю то

29:01

есть что можно импортировать какие методы есть у классов и прочее прочее очень полезные вещи но повторюсь он у

29:07

нас ещё до конца не настроен и мы сейчас устанавливали окружение для И вообще для того чтобы можно было на каком-то живом

29:13

примере то есть примере на проекте Джан посмотреть как настроить дальше все дополнительные плагины и расширения по

29:20

работе с Python с вёрст и прочими прочими вещами Итак давайте вернёмся

29:26

всё-таки к этому обратно переходим в расширение установим дополнительно всё что необходимо именно

Дополнтительные расширения для python

29:31

для питона для того чтобы работать с любыми библиотеками ма не имеет значения и настроим Всё это

29:39

для начала так Python pance есть дальше следующее что нам необходимо сами

29:45

это Зачем нужно это расширение если обеспечивает автокомп подсказки и

29:51

серьёзные структурные нарушения в коде то необходим для болем дополняет его и

29:58

показывает прочие дополнительные мелочи которые улучшат качество кода помогут

30:03

избежать неких ошибок и так далее тоже его обязательно устанавливаем Я обязательно сейчас покажу как они оба

30:10

работают за что отвечают и как их необходимо настроить Итак пока устанавливается pint найдём ещё одно

30:17

расширение которое называется Black вот о тоже макросов устанавливаем

30:24

Зачем для того чтоб сами форматировать наш код в соответствии с правилами

30:30

оформления кода p8 то есть лишние лишние пробелы не соответствие длины строки То

30:36

есть он перенесёт строку за вас и прочие прочие вещи очень удобно в один клик ваш документ приводится в абсолютно

30:41

Нормальный рабочий вид мы установили все четыре расширения которые нужны для Python и теперь необходимо их настроить

settings.json для проекта

30:48

потому что по умолчанию они работают по умолчанию скажем так для этого теперь

30:54

здесь в папке с ШИМ проектом может быть папка которая называется точка vs код

31:01

если её нет то мы просто здесь в нашем проекте кликаем сюда создаём новую папку

31:09

которую так и называем точка vs

31:15

код в этой папке будут храниться файлы конфигурации для нашего конкретного

31:20

проекта например Давайте создадим здесь новый файл в этой папке она была выделена я нажал сюда на плюсик иде

31:31

тоже именно так и теперь здесь в этом файле J будут храниться Дополнительные

31:37

настройки для редактора vs которые касаются конкретно только нашего проекта

31:44

напомню есть файл J общий который находится

31:52

фа Вот он есть мы его здесь можем открыть и пого

31:57

суммарно всего редактора А вот этот конкретно под наш проект и теперь здесь

32:03

что мы делаем открываем закрываем фигурные скобки и здесь мы перечисляем все те необходимые пункты которые нам

32:10

нужны для работы для настройки работы наших плагинов Что именно Нам здесь нужно

Тонкая настройка Pylance

32:16

сделаем даже не так я это сейчас удалю и сюда вставлю уже все свои готовые

32:23

настройки Вставляю все настро нам а и так всё видно

32:29

Замечательно Что нам здесь вообще с вами нужно первое что нам необходимо сделать

32:36

конкретно для этого проекта первая настройка которую я использую это

32:41

касается системы контроля версии git то есть автоматическое обнаружение репозиториев Например если вы работаете

32:49

со своим проектом у вас где-то на компе есть ещ один какой-то проект вы оттуда берте перетаскивай чтобы посмотреть там

32:57

есть гит репозиторий то если этой опции Нет этот гит репозиторий Ну будет предложено по крайней мере предложено

33:04

здесь подключить его к этому проекту тот репозиторий и чтобы это окошко постоянно

33:09

к примеру не надоедал Я ставлю вот такую настройку далее хлебные крошки для

33:17

Джанго проекта Например я включаю то есть напомню суммарно у нас settings Jon здесь Так где они

33:25

здесь Вот они Они отключены а Конкретно если я хочу чтобы они работали в когда я

33:32

работаю с дн то я их включаю то есть эти пользовательские настройки для проекта которые вот здесь находятся именно в

33:38

проекте они перекрывают те которые находятся здесь в основном файле поэтому

33:44

к примеру в дн они будут работать если есть вот этот файл setting J здесь в каком-либо проекте дальше а теперь

33:51

поехали настройки для pance для того чтобы он грамотно подсказывал нам и дополнял скажем так разными полезно наш

33:59

код Первое - это мы включаем Python langage pance супер и дальше Поехали

34:06

начнём я их вот так вот отде и Давайте начнём вот снизу смотреть так во-первых включаем индексацию файлов в том числе и

34:13

файлов сторонних библиотек То есть например того же Джан неважно для

34:18

лучшего автокомп дальше следующее очень важно Так

34:25

а вот так Как именно анализировать какие-либо сторонние библиотеки Дело в том что по

34:31

умолчанию смотрите любая библиотека вот которая установлено в данном случае ДНП

34:37

ли не имеет значения имеет глубину индексации вложенных пакетов два Когда

34:43

вы работаете с каким-либо пакетом более крупным например сакет лёд jang ифск всё

34:50

это будет уместно лучше указывать глубину индексации вложенных пакетов этой библиотеки на три и включать все

34:57

символы так автокомплит будет намного подробнее подсказывать методы классов и

35:04

прочие и прочие вещи и теперь здесь импорт абсолютный импорт

35:10

подключаем какие варианты здесь можно выбрать другие То есть если вы хотите не абсолютный импорт чтобы подключался

35:16

Когда вы ввели что-то и через Quick Fix Сейчас посмотрим Автоимпорт

35:24

делаете есть варианты Итак тоже точно также парр здесь работает не знаете

35:30

какой вариант выбрать стёрли он подсказывает выбрали и теперь здесь то

35:37

есть относительный или абсолютный варианты подсказывает так выбираем абсолютный и теперь здесь включаем если

35:44

это вам необходимо А это очень удобно отображение подсказки типов то есть Какие функция возвращает и какую и какой

35:51

тип данных приходит в переменную что это такое откроем любой файл и мы видим

35:57

здесь например вот есть функция и здесь отображается какой тип

36:02

данных Например Она возвращает то есть мы видим что здесь будет обращение к какой-то неизвестной функции но мы не

36:08

знаем что она будет возвращать и здесь нам отображается что эта функция в итоге передаёт сюда всё это проиндексировали

36:15

что будет возвращён Best Manager Card То есть это будет выборка из базы данных по

36:20

какой-либо корзине пользователей Или например Здесь возвращается словарь поэтому Ука

36:27

э функция возвращает дикт то есть словарь у которого ключом строка и значением является точно также выборка

36:34

из база данных там по товарам продукт очень удобно в том числе Ну какой-нибудь

36:39

простой пример создадим переменную X равно и здесь запишем список он

36:47

отображает что в X будет присвоен тип данных то есть ВС понятно это у на будет

36:54

строка буде пишем просто фигурные скобки ожидается что будет словарь запишем одно

37:01

значение через запятую в фигурных скобках это уже будет сет то есть

37:06

множество всё это очень удобно и помогает в ориентироваться в коде то

37:11

есть аннотации типов помогут вам наиболее чётко ориентироваться это предупредит многие

37:17

ошибки Итак дальше возвращаемся к настройкам и здесь вот это особенно важная настройка Type Checking Mode он

37:23

по умолчанию выключен То есть это касается точно также аннотации типов он

37:29

выключен есть ещё два варианта bic так в подсказке есть да bic то есть

37:37

базовый уровень и Рикт сложный Рикт включать Не рекомендую то есть Суть в

37:42

чём при уже при Basic у вас будет очень много выскакивать скажем так не ошибок а

37:48

предупреждений о том что например какой-то функция сейчас что-нибудь вот например метод он может возвращать есть

37:56

есть проверка если то-то то он возвращает какое-либо значение А если

38:02

проверка Не сработает она возвращает Нон соответственно Здесь нам аннотация типов как бы подсвечивает что здесь будет или

38:08

возвращено не нечто или Ничего если применить такой метод где-то в коде то если выставить typ Checking Mode в

38:16

настройках на на бази уровень то в таком случае там будет предупреждение что как

38:22

так на может что-то прийти А может прийти значение н То есть это будет

38:27

скажем так некое предупреждение о том что что-то может пойти не так если вдруг

38:33

вернётся Нон А вы это не обработали и так далее Это по поводу палан то есть глубину для каждой библиотеки

38:39

устанавливаем самостоятельно которая нам нужна чем луже чем больше индексация в

38:46

глубину по вложенным подкаталогом тем естественно это больше жрёт мощностей ПК

38:51

но тем не менее улучшает автокомплит то есть вместо дн если это какой-то другой проект

38:57

или перечислили здесь несколько библиотек если они несколько используются Это то что касается настройки именно пайнса то есть автокомп

39:05

кода дальше следующий подключаем форматер здесь указываем что форматер по

39:11

умолчанию это у нас будет Black который мы сами установили Посмотрим как он работает то

39:17

есть Например я здесь сделаю вот так и нажму правой кнопкой формат

39:25

документ убрались Если бы была превышена длина строки допустимые пределы то он бы

39:32

всё это дело а вот вот он сейчас перенёс то есть Image так как была слишком длинная строка перенеслась на более

39:38

новый уровень замечательно дальше следующее теперь нам необходимо с вами

Тонкая настройка Pylint

39:43

настроить pint для того чтобы он нам не предупреждал о всяких вещах которые нам

39:50

не интересны То есть это правило оформления кода по п8 и вот нам

39:57

здесь мы видим смотрите pint нам говорит о том что пропущена строка документации

40:02

модуля то есть непосредственно самого файла также здесь он нам подсказывает пропущена строка документации

40:10

класса метода и прочие прочие вещи как это можно исправить делается это

40:17

следующим образом Так сейчас я сверну весь проект чтобы не мешалась Да и

40:22

теперь открою проводник и закину сюда прямо в корень проекта то есть

40:27

непосредственно сюда уже подготовленный файл название этого файла всегда даётся

40:33

как pint RC в этом файле перечислены message

40:39

Control и здесь указываем что именно отключить то есть disable и здесь

40:44

перечисляем что именно Итак смотрим наводим и видна ошибка здесь указано что

40:50

это от и здесь не знаю на записи видно или нет оно полупрозрачное указан код

40:57

двоеточие и текстовое описание можно взять или код или текстовое описание

41:02

лучше текстовое описание чтобы было понятно что это такое и в этом файле записываем именно вот

41:10

так все те оповещения которые мы не хотим видеть потому что очень много лишних например пропущена строка

41:17

документации например импорт не вверху файла например тот же

41:22

файл manage P Обратите внимание то есть такое может быть и здесь на этот файл Палин ругается о

41:30

том что здесь у нас есть импорт импорт Тото Тото и здесь есть

41:37

оповещение о том что он почему-то не импортированные моменты которые мешаются

41:44

и не нужны мы отключаем по поводу этого нте так он через пару секунд подхватил

41:49

настройки и мы видим что уже эти лишние предупреждения он нам скажем так не подсвечивает Ну вот есть разные полезно

41:56

например вот появились три точки под класс Мета и здесь написано слишком мало

42:01

публичных методов Ну скажем так такое бывает Но тем не менее Это очень полезно особенно если

42:07

сейчас сделаем так так Вот пример полезности данного линтер то есть зачем

42:12

он нужен к примеру в дополнении к паланс Итак вот есть метод и здесь вот три

42:18

точки под If что нам здесь написано а здесь написано что

42:24

бесполезные оператор els после того как в первом же ифе ты написал н парень

42:30

переделай код рабочий всё нормально но действительно с точки зрения логики это выглядит немножко Дикова поэтому мы

42:37

делаем следующее так как логика по сути не меняется если If то мы с функции выходим Ну а весь остальной код просто в

42:45

else находится поэтому и на этом функция завершается поэтому Делаем всё Вот так и теперь не

42:52

переносить же нам всё это с вами вручную вот таким вот образом вровень чтобы всё было

43:07

нет диагностик мод То есть как анализировать весь проект целиком или

43:13

только файл который у вас открыт по умолчанию это у меня по крайней мере

43:18

выбрано workspace то есть полностью всё рабочее пространство это помогает обнаружить проблемы сразу во всех файлах

43:27

или вы можете как я говорил заново немножко ввести и здесь выбрать например Open Files Only в таком случае Бут будет

43:35

анализироваться только открытый файл который у вас открыт Это намного облегчит нагрузку на ваш ПК так так

43:45

супер с настройкой конкретно пайтона мы с вами закончили

43:50

теперь дальше следующее во-первых вот этот Файлик который отвечает за то На что обращает

43:58

внимание pint Вы можете дополнить самостоятельно сохраните себе этот файл он тоже будет

44:05

на гитхабе и держите его под рукой то есть любой проект который Вам нужно забрасывает его и нте работает так как

44:12

вам нужно с этим понятно дальше теперь дополнительное что нам с вами необходимо

Настройка плагина Django

44:18

прописываем здесь например для работы с и для того чтобы в шаблонах у

44:23

наработал то есть теги прочие вещи нам нужно с вами расширение джанга от

44:29

baptist dors устанавливаем его и после установки этого расширение так откроем

44:34

какой-нибудь шаблон Мы видим что здесь начинают подсвечиваться все шаблонные теги которые есть в джан как и

44:42

плейсхолдер в том числе и конечно же работает автокомплит этих этих тегов то есть мы сразу записываем с вами Т

44:49

срабатывает это расширение и выбираем что там Статик не Статик и прочие вещи

44:56

но чтобы это работало Это точно также Необходимо включить следующими настройками здесь же в файле setting

45:02

которые находится в нашем проекте здесь дальше добавлено следующее поддержка то есть Нам необходимо сделать так чтобы

45:08

работало одновременно и наше расширение и плагин который необходим для работы с

45:13

HTML файлами для этого добавляем в поддержку HTML HTML это позво нам

45:22

одмен шаб ра то есть мы с вами без проблем можем

45:32

там Умно 5 Enter и нам сформирует там

45:38

необходимый шаблон который нам нужен То есть это позволяет работать и в одном

45:44

шаблоне дальше записываем файлы ассоциации для того чтоб файлы HTML

45:49

которые ВБ

45:54

hml говорю вот онн HTML а для того чтоб

46:01

просто файл HTML который не находится в папке templates отображались как HTML

46:08

файлы это важно может быть для некоторых вещей в работе поэтому здесь

46:13

записываем дополнительные характеристики по ассоциации файлов то есть обычные просто HTML файлы - это HTML для это у

46:21

нас будет те которые находятся в папке рашим множ это сделаем так замм

46:28

стрелку вниз Shift стрелку вниз и здесь добавим

46:35

ещё одно если у нас вдруг будут HTML файлы где-то в глубине то

46:42

есть в папке в папке и так далее ещё одну ещ один подстановочный знак напишем

46:54

здесь для этого расширения то есть сниппеты которые необходимо отключить и

47:01

настройки которые необходимы для его корректной работы и все эти настройки которые

47:07

перечислены у нас в этом файле Set Jon которые относятся конкретно к нашему проекту можно точно также перенести

47:13

Например если вы хотите чтобы они постоянно у вас работали независимо от проекта все их отсюда скопировать

47:21

естественно без главной естественно без главной открывающей закрывающей фигурной скобки перенести точно также в файл

47:27

setting Jon суммарно всего редактора они оттуда точно также будут замечательно

47:33

работать если вдруг вы не хотите постоянно их сюда добавлять из проекта в

47:38

проект супер с этим разобрались теперь следующий момент - это запуск Python

Запуск python кода, отладчик

47:44

кода а также к примеру такого момента как правильно запускать сервер дн или

47:50

запускать отладку вашего кода для демонстрации создадим здесь где-нибудь

47:55

в корне проекта пустой файл Python назовём его тест

48:02

то и напишем здесь какой-нибудь простенький код например сделаем так From

48:10

Mod как мы видим подсказки работают мы с вами

48:17

импортируем класс daytime ВС нам позыва ВС подсвечивается

48:23

сечас Нам пока что говори подчеркивая это что нес неиспользуемый импорт сейчас

48:30

мы это поправим запишем здесь функцию Print Это не имеет значени так ну чтобы

48:35

просто вывести например Мы хотим использовать этот класс

48:40

daytime и обратиться к нему к методу для того чтобы посмотреть

48:46

отобразить сколько сейчас времени то есть дату и время вывести на экран если удалим последнюю пустую

48:53

строчку точа подчеркнёт что мы видим здесь предупреждение что пропущена

48:59

финальная пустая строка также мы видим в строке состояния здесь что есть одно предупреждение такие предупреждения от

49:06

Палин могут быть и как предупреждение просто оповещение вроде как не Особо важное восклицательный знак - Это

49:13

достаточно серьёзное предупреждение то есть обрети внимание и ошибки в данном

49:18

случае Мы это исправляем можем добавить вручную е один

49:24

пробел установили с вами Blake то мы просто кликаем формат документ

49:30

автоматически исправились все косяки и теперь как выполнить этот код во-первых Обратите внимание что расширение Python

49:38

которое мы с вами установили автоматически добавило сюда нам в редакторе вот такую стрелочку То

49:44

есть если на неё навести то будет написано Run Python F то есть непосредственно текущий файл который у

49:50

нас открыт активная вкладка если мы сейчас на неё нажмём то запустится терминал

49:56

и выполнится тот код который у нас здесь написан то есть вот у нас вывелось дата и время когда записывается это видео

50:04

замечательно закрываем Так этот файл Мы с вами уже научились запускать но Как

50:10

запускать к примеру более сложные вещи такие как например jang так как там нет

50:16

скажем так основного файла который можно запустить нажав на эту стрелку То есть

50:21

например вот есть й manage P Да он запускает сервер jang Но для того чтобы

50:27

всё нормально заработало Что необходимо сделать нужно нажать терминал открыть

50:33

терминал и теперь необходимо вызвать этот файл manage P просто нажав зелёную

50:39

стрелку ничего не получится потому что ему ещё нужно передать дополнительную команду То есть например вызываем файл

50:47

Man и здесь записываем команду Run для того чтобы запустить такой

50:53

проект на Linux и на Mac здесь ещё необходимо обязательно Дописать вот так

50:59

Python прол manage P Run Server на Windows всё работает

51:04

достаточно просто просто manage R серве так понятно что файлы P ассоциированы с питоном поэтому он и запустится и вот

51:10

дополнительный аргумент И теперь когда мы нажимаем Enter и запускается локальный

51:16

сервер jang на которой мы с вами без проблем можем перейти Ctrl к по ссылке

51:22

локальный хост и открывается веб-браузер с запущенным локальным веб приложением

51:28

замечательно то есть то есть если запуск простых простых проектов скриптов

51:34

выполняется просто нажатием одной кнопки проекты в которых необходимо

51:39

например запуск сервера и так далее приходится запускать через терминал прописываю вручную команды потому что

51:45

просто Не сработает если сейчас нажму сюда в попытке запустить сервер через

51:51

обычный запуск файла Ну будет обращение к файлу да попроб запустить и здесь так как это

51:57

утилита Она всего лишь выведет список команд которые необходимо вводить далее

52:04

вручную и поэтому здесь на панели действия есть такой пункт Run deb То

52:12

есть как именно запускать и обрабатывать код который Вы хотите выполнить если мы сечас сюда вот

52:20

займ и посмотрим он нам предлагает здесь

52:26

фа для того чтобы запускать вот такие сложные скрипты если работать с каким-то простым проектом у которого который

52:33

запускается весь код через какой-то один точечный файл без каких-либо дополнительных команд Run theb работает

52:39

и так то есть вот смотрите если перейти сюда во вкладку Run редактора и посмотреть вот

52:46

ста debug То есть это клавиша F5 просто запустить файл как аналог этой

52:53

кнопки без F5 то есть вот такой простой скрипт мы

52:58

можем сразу нажать Ctrl F5 вместо того чтобы нажимать на эту зелёную

53:04

стрелочку запустится терминал и отработает наш код всё замечательно если

53:10

мы к пример захотим произвести отладку этого кода например чтобы посмотреть на действие какой-нибудь переменной и так

53:17

далее Например у нас там

53:24

Каяни Посмотреть какое значение будет например в этой переменной когда код будет на

53:31

выполняться на этой точке то есть сначала эта строка исполнится эта А здесь мы остановим исполнение скрипта

53:37

тогда мы нажимаем F5 Start debugging для того чтобы остановить

53:43

выполнение кода в этой точке нажимаем F5 и выбираем Python File запускается дебаг

53:50

режим ход исполнения программы останавливается на той точке breakpoint которую мы с вами установили и

53:56

появляется вот такая панелька которую можно сместить если она мешает открытым

54:02

файлам с панелью действий то есть остановить дебаг перезапустить его и

54:09

здесь то есть следующий шаг Или например ПТА Если вы хотите зайти внутрь

54:15

какой-либо функции работающей и так далее можно этот

54:20

бме можно эту Томе

54:25

каком-то участке где есть код нажать например оно перескочить сразу на неё посмотреть

54:33

У нас здесь есть переменная X со значением 5 и так далее но как запустить

54:38

таким образом Например если с простым файлом Всё достаточно просто как запустить так например сервер дн чтобы

54:43

работал через комбинацию клавиш чтобы не вводить всё вручную так останавливаем наш дебаг иде Мы видим что нам

Запуск и отладка сервера Django. launch.json

54:51

отображается ложение тыкаем сюда и здесь выбираем уже

54:57

из предустановленных заготовок Что именно Мы хотим запускать и здесь уже есть J F flk pam То есть все те основные

55:05

моменты которые необходимо запускать через встроенный отладочный сервер То есть это как дн там то есть все эти

55:13

проекты тыкаем на дн например Это нам сейчас нужно и автоматически создаётся J

55:20

в котором уже прописаны все настройки Как запускать приложение то есть мы видим

55:26

что Python jang п Python запустить рабочее пространство сюда подтягивается

55:32

и дополнительные аргументы то есть мы видим здесь написано запускать й manage с командой Run Server А где находится

55:39

этот La Jon он находится в папке vsc в нашем проекте то есть

55:45

переходим здесь в Explorer и мы видим что рядом с файлом settings J который

55:51

управляет настройками редактора для нашего проекта и плагинами здесь появился дополнительный файл lach J вот

55:58

он и открыт Супер Теперь когда мы переходим опять

56:04

Run and debug теперь здесь вверху как мы видим есть варианты То есть мы можем

56:09

выбрать Python Jung или вернуться просто к обычному к отладке просто Python

56:14

файлов или Python проектов которые запускаются через ну скажем так просто поэтому вот можно переключиться сюда на

56:21

Python или выбрать pyth И теперь когда выбрано именно такой отладочный вариант

56:28

теперь запустить сервер достаточно Просто если мы сейчас нажмём Ctrl

56:35

F5 даже не открывая фай manage P У нас сейчас открыт активный файл Test но так

56:42

как у нас настроена конфигурация именно запускать manage он и запускается и у нас без отладки запущен сейчас сервер J

56:50

если мы хотим сладкой его запустить точно также установить где-то там файл

56:56

и так далее то мы нажимаем F5 также Обратите внимание здесь внизу на панели состояния так и написано что

57:02

сейчас запущено Python jungo Application если мы запустим debug то есть нажмём F5

57:09

а не Ctrl F5 то тогда здесь будет написано debug Python J Application то

57:14

есть с этим всё понятно ясно настраивается запуск файлов достаточно просто бкпо все снимаем Man закрываем

57:21

панельку тоже убираем по настройке Python и дн уже уже Всё

57:28

теперь переходим к следующим моментам которые тоже относятся сюда но это уже относится к более вёрстке это и в дн

CSS Peek

57:34

очень поможет Но также мы сейчас настроим именно вёрстку шаблонов То есть это могут быть

57:41

просто HTML CSS файлы точно также этон HTML файлы не имеет никакого значения

57:46

всё будет работать одинаково так открою какой-нибудь шаблон и тепер переходим

57:52

обратно в расширение дополнительные и первое важное расширение которое Нам

57:58

необходимо для работы с CSS файлами то есть в разметке например стилизация и тому подобно это расширение

58:05

CSS пик сразу кликаем установить настраивать дополнительно его никак не

58:10

нужно оно работает сразу и теперь давайте посмотрим что оно умеет так перейдём обратно в наш проект И откроем

58:18

теплей так и Сейчас я найду какой-нибудь свой CSS стиль кроме здесь есть чтобы

58:25

можно было продемонстрировать работу вот он этого расширения То есть у нас есть с

58:31

вами здесь вот например Custom shad какой-то класс который мы не знаем что он означает И вообще зажимаем клавишу

58:37

Ctrl и наводим так и ничего не происходит видимо нужно перезагрузить редактор просто закрываем его и

58:45

запускаем заново так и сразу его закинем сюда на панель быстрого

58:53

доступа почему-то это не помогло давайте сделаем так откроем заново полностью проект чтобы все настройки потянули

59:00

заново файл Open Folder и здесь на тыкаем заново наш проект Application

59:08

выбор или же есть аналогичная кнопка просто Refresh Explorer Так проверим

59:15

сейчас Да значит заработал наконец-то как он работает у нас есть CSS стиль который мы

59:23

не знаем В какой файле находятся папки и вообще мы не хотим туда лезть во-первых Что можно сделать просто тыкнуть клавишу

59:29

F12 сразу откроется CSS стиль и сразу откроется файл с CS стилями Где

59:37

находится этот стиль И вот он нам подсвечивается Это первый вариант использование этого плагина

59:43

второй вариант просто зажать клавишу Ctrl или Command на Mac навести на стиль и здесь покажется Какие Что именно

59:50

прописано в этом стиле или есть другой вариант кликаем правой кнопкой и здесь

59:55

выбрать пик или как мы видим комбинация клавиш Alt F12 нажимаем и у нас здесь

1:00:01

всплывает всплывающее здесь появляется всплывающее окно в котором открыта

1:00:07

мини-версия документа CSS в котором мы сможем непосредственно сразу отредактировать Этот стиль Ну и потом

1:00:13

его закрыть По мне так очень удобно следующая полезная вещь которую можно установить

Auto rename tag

1:00:20

это вот он тыкаем на установить Сейчас посмотрим что он делает бывает

1:00:27

достаточно неудобно когда Например нужно что-то изменить Вот например где-нибудь так что-нибудь найдём какой-нибудь тег

1:00:34

такой подходящий по теме так та где ж о о вот он тег P

1:00:43

например Мы хотим здесь сделать тег H1 как это делается обычно стирается Здесь пишется H1 и потом здесь то же самое

1:00:50

нужно делать aut name Tag фиксирует начало и закрывающий Тег и поэтому когда

1:00:55

мы меняем только открывающий тег например напишем здесь H3 автоматически меняется и закрывающий

1:01:02

тег достаточно удобно и следующая вещь которая абсолютно

Автокомплит стилей Intellisense for CSS

1:01:08

необходима по моему мнению это ин так с одной

1:01:16

L так ин CSS вот он Intell for

1:01:23

CSS его очень полезная вещь которая добавляет автокот для подсказки по имеющимся CSS

1:01:31

стилям особенно очень удобно Ну во-первых это просто удобно Как вы видите сразу подсказывает

1:01:37

очень удобно Если вы работаете с вёрст это раз во-вторых уж тем более если

1:01:42

например с бустра пом или ещё чем-либо запомните их все нереально и вот пожалуйста все CS стили пропар которые

1:01:49

есть на Boot и вы сами их Ну если это скажем так скачанный скрипт

1:01:55

скачанный CSS стили bootstrap и по вашим Очень удобная штука и последняя вещь

LiveServer

1:02:01

которая нужна для работы с Python и Jango она не нужна но к примеру вы верста ете макет и достаточно удобно

1:02:06

было бы скажем так открыть Ваш макет не просто в браузере файл забросить а

1:02:14

открыть его запустить реально как на

1:02:23

отладочная в не для этого есть специальное расширение Севе тоже устанавливаем если

1:02:30

он конечно Вам нужен и Обратите внимание есть здесь второй похожий сервер так 5

1:02:36

устанавливаем тот у которого больше всего установок 40 млн Да именно

1:02:41

этот и получается следующее добавляется так закроем добавляется здесь вот Go при

1:02:49

работе с это не нужно но повторюсь ЕС Работаете С htmls вст чисто для того

1:02:56

чтобы запустить весь проект вёрстки на локальном Хосте который будет постоянно

1:03:02

у вас в браузере обновляться после того как вы внесли изменения очень крутая штука а и используется достаточно легко

1:03:09

достаточно просто кликнуть здесь и сервер автоматически запустится развернув ваш вашу вёрстку на

1:03:16

локальном сервере очень удобно на этом видео в принципе завершается все остальные мелкие веи уверен вы сможете

1:03:23

настро Том ле Если вы занимаетесь только версткой то захотите убрать количество

1:03:30

пробелов Это количество пробелов чтобы было меньше нече ад например это сделать достаточно просто просто кликнув

1:03:37

по панели состояния sp4 выбрать здесь что вы хотите чтобы были пробелы

1:03:44

заменялись стабы наче или на два пробела Или например

1:03:54

которые вам нужно все эти изменения точно также сохранятся в файле setting J и на этом всё видео завершается С вами

1:04:01

был канал Python Hub Studio Надеюсь видео Вам понравилось Не забудьте его оценить и поставить лайк до следующих

1:04:08

видео пока


**Статические файлы**  

Веб-сайты обычно должны обслуживать дополнительные файлы, такие как изображения, JavaScript или CSS. В Django эти файлы называются «статическими файлами». Django предоставляет `django.contrib.staticfiles` для управления ими во время разработки. 
В нашем приложении будут использоваться картинки, а также различные css стили для форматирования страниц.
Настроим обслуживание статических файлов в нашем проекте:
1. Убедимся, что `django.contrib.staticfiles` включено в `INSTALLED_APPS` в файле settings.py:
```
INSTALLED_APPS = [
    "django.contrib.admin",
    "django.contrib.auth",
    "django.contrib.contenttypes",
    "django.contrib.sessions",
    "django.contrib.messages",
    "django.contrib.staticfiles",

    "upload", "details",
]
```
2. Также убедимся в наличии строки:
```
STATIC_URL = '/static/'
```
если она отсутствует, ее следует добавить.
3. Поместим статические файлы в папку static приложения, где Django по умолчанию будет искать статические файлы:  
```
app/details/static/details/
```
Если бы в нашем проекте, были статические элементы, не связанные с конкретным приложением, нужно было бы, помимо использования каталога static/ в ваших приложениях, определить список каталогов ( STATICFILES_DIRS ) в файле настроек, сообщающий Django, где он может найти другие статические файлы. Например :
```
STATICFILES_DIRS = [
    BASE_DIR / "static",
    '/var/www/static/',
]
```
Однако так как на данном этапе мы ограничимся одним приложением в проекте, эта опция пока не нужна.


**Верстка шаблонов**

Для верстки шаблонов будем использовать так называемую контейнерную верстку. Содержимое будет размещено в некоем элементе, ширина которого, ограничивающая ширину содержимого, позволяет пользователям удобно работать с материалами сайта и обеспечит хорошее отображение всех элементов на разных устройствах. Такие элементы называют «обёртками» (wrapper) или «контейнерами» (container). Затем эти контейнеры будут стилизованы средствами CSS для правильного отображения.

Преимущества такого типа верстки состоят например в том, что
- Использование контейнера улучшает читабельность содержимого страницы. Без контейнера содержимое, вроде текста, может растягиваться на всю ширину экрана. На маленьких экранах подобное может давать вполне приемлемый результат. Но на больших экранах это выглядит очень плохо.
- Группировка элементов дизайна страницы упрощает настройку расстояния между ними.
- Элементы дизайна  сложно сгруппировать по столбцам без использования контейнера.


**Шаблоны**

**Шаблоны (templates) отвечают за формирование внешнего вида приложения.** Они предоставляют специальный синтаксис, который позволяет внедрять данные в код HTML.

Настройка функциональности шаблонов в проекте Django производится в файле settings.py. с помощью переменной TEMPLATES. Так, по умолчанию переменная TEMPLATES в файле settings.py имеет следующее определение:
```
TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [],
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.debug',
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
            ],
        },
    },
]
```

Данная переменная принимает список конфигураций для каждого движка шаблонов. По умолчанию определена одна конфигурация, которая имеет следующшие параметры

BACKEND: движок шаблонов. По умолчанию применяется встроенный движок django.template.backends.django.DjangoTemplates

DIRS: определяет список каталогов, где движок шаблонов будет искать файлы шаблонов. По умолчанию пустой список

APP_DIRS: указывает, будет ли движок шаблонов искать шаблоны внутри папок приложений в папке templates.

OPTIONS: определяет дополнительный список параметров

Итак, в конфигурации по умолчанию параметр APP_DIRS имеет значение True, а это значит, что движок шаблонов будет также искать нужные файлы шаблонов в папке приложения в каталоге templates. То есть по умолчанию мы уже имеем настроенную конфигурацию, готовую к использованию шаблонов. Теперь определим сами шаблоны.

Добавим в папку приложения каталог templates. А в нем определим файл base.html

```
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="{% static "details/css/style.css" %}">
  <title>{% block title %}Doc{% endblock %}</title>
  
</head>
<body>

<header>
  <img class="logo" src="{% static 'details/img/logonew.png' %}" alt="logo"/>
</header>

{% block content %}
content
{% endblock %}

<footer>
OOO "Клейтон" 2024
</footer>

</body>
</html>
```

Это практически обычная веб-страница, которая содержит код html, за несколькими небольшими отличиями.

1.  **{% load static %}**   
Строка `{% load static %}` необходима для ссылки на статические файлы в таких элементах, как `<head>` и `<body>`. В примере, показанном в этом разделе, под "статическими файлами" понимается набор пользовательских тегов шаблонов Django, который позволяет ссылаться на статические файлы с помощью синтаксиса `{% static %}`.
2. **{% static "details/css/style.css" %}**  
Здесь происходит подстановка префикса, который указан в файле настроек, для определения полного пути к статическим файлам.
3. Блок
```
{% block content %}
content
{% endblock %}
```
Основная фишка шаблонов Django — наследование. Шаблон может расширять (уточнять) поведение родительского шаблона. В данном случае наш базовый шаблон base.html будет расширяться дочерними шаблонами. 
Участок шаблона обернутый в блочный тег `{% block name %} {% endblock %}` в шаблоне наследнике может быть переопределен так, как нам будет нужно.
По сути наследование шаблонов позволяет реализовать принцип DRY(dont repeat yourself).

Взглянем, каким образом происходит наследование, а также посмотрим на другие тонкости работы с шаблонами:
```
{% extends "details/base.html" %}

{% block title %}{{title}}{% endblock %}

{% block content %} 
<div class="title_text">
<h1>{{content}}</h1>
</div>
<div class="wrapper">
  <div class="scroll">
    {% for number in acln %}
    <a href = {% url "number" number %}>
    
      <div class="container">
        
        <p class="info">{{number}}</p>      
      </div>

  </a>
    {% endfor %} 
  </div>
</div>  
{% endblock %}  
``` 
Рассмотрим шаблон info.thml подробнее:
`{% extends "details/base.html" %}` говорит о том, что этот шаблон расширяет наш базовый шаблон. Также в него из соответствующего метода view был передан ряд переменных:
- title - строка, содержащая заголовок страницы и подставляемая в блок заголовка title. Чтобы получить доступ к значению переменной ее имя оборачивается двойными фигурными скобками.
- content - заголовок для отображения на странице
- acln - список чертежей. который перебирается в цикле, где генерируется отображение названий чертежей в виде списка:

![pict](pict-1.png)

Также стоит разобрать, что происходит в конструкции вида:  
`{% url "number" number %}`  
 тег {% url %} служит для генерации URL-адресов для представлений или шаблонов именованных URL-адресов, определенных в конфигурации URL проекта Django. Этот тег позволяет создавать динамические URL-адреса в шаблонах. Здесь в цикле создаются динамические url адреса для каждого из чертежей, где `"number"` - название функции view, отвечающей за эту ссылку, а
 `number` - первеменная цикла, которую мы передаем в эту функцию, для генерации url  

**Структура Базы Данных**

Первоначально была запланирована следующая структура БД:

![BD](pict-2.png)

Здесь в таблице `Draws` хранятся чертежи и комментарии к ним, в таблице `Orders` - номера заказов с флагом - завершен ли заказ.
Так как в одном заказе может быть несколько деталей и одна деталь может быть в нескольких заказах дополнительно создается таблица `OrderLists`, связывающая эти 2 таблицы, в которой будут содержаться отдельные пункты каждого заказа, их количество и флаг завершения пункта заказа. При завершении всех пунктов заказа флаг в таблице заказов будет проставляться автоматически.

Таблица `Tools` содержит информацию о используемых инструментах. Таблица `CNC_Programms` содержит информацию по программам обработки для каждого из чертежей деталей. Одна деталь может обрабатываться не одной, а несколькими программами, с разными обрабатывающими инструментами, что отражают связи. 
Однако возникли вопросы - нужна ли таблица для оснасток, таблица исполнителей заказа. Поэтому было принято решение в тестовой версии ограничиться одной таблицей, состоящей из полей "имя чертежа" и "комментарий", чтобы потом проанализировать комментарии и с их учетом уже разработать структуру базы данных. Также к этому времени будет принято решение дополнять ли программу работой с заказами, и нужно ли будет в этом случае фиксировать исполнителя заказа.

Таким образом создаем простейшую БД из 1 таблицы в файле models.py


**Контейнеризация**  

Так как было принято решение о том, что приложение будет разворачиваться в контейнере Docker, а также в учебных целях было принято решение изначально запускать и создавать приложение с использованием контейнеризации.

Таким образом понадобится два варианта образов приложения - для разработки и для продакшена.
Одним из плюсов такого подхода будет то, что мы сможем сразу поменять `settings.py` таким образом, чтобы он бьл универсальным и получал важные параметы из переменных окружения:

```
from os import environ

SECRET_KEY = environ.get('SECRET_KEY')
DEBUG = int(environ.get('DEBUG', default=0))
ALLOWED_HOSTS = environ.get('ALLOWED_HOSTS').split(' ')
```

Подключим базу данных под управлением СУБД PostgreSQL:

```
DATABASES = {
    'default': {
        'ENGINE': environ.get('POSTGRES_ENGINE', 'django.db.backends.sqlite3'),
        'NAME': environ.get('POSTGRES_DB', BASE_DIR / 'db.sqlite3'),
        'USER': environ.get('POSTGRES_USER', 'user'),
        'PASSWORD': environ.get('POSTGRES_PASSWORD', 'password'),
        'HOST': environ.get('POSTGRES_HOST', 'localhost'),
        'PORT': environ.get('POSTGRES_PORT', '5432'),
    }
}
```
Зададим пути для статических файлов:

```
# То как статический файл будет отображаться в url
# Пример /static/1.jpg
STATIC_URL = "/static/"
# По какому пути можно будет найти файлы
STATIC_ROOT = BASE_DIR / "static"

# Аналогично static файлам
MEDIA_URL = "/media/"
MEDIA_ROOT = BASE_DIR / "media"
```

Подготовим по два `docker` и `docker-compose` файла, для разработки и для продакшена.

`Dockerfile` для разработки:
```
FROM python:3.8.6-alpine

# рабочая директория внутри проекта
WORKDIR /usr/src/app

# переменные окружения
ENV PYTHONDONTWRITEBYTECODE 1
ENV PYTHONUNBUFFERED 1

# Устанавливаем зависимости для Postgre
RUN apk update \
    && apk add postgresql-dev gcc python3-dev musl-dev

# устанавливаем зависимости
RUN pip install --upgrade pip
COPY ./requirements.txt .
RUN pip install -r requirements.txt

# копируем содержимое текущей папки в контейнер
COPY . .

ENTRYPOINT ["/usr/src/app/entrypoint.sh"]
```

где `entrypoint.sh` скрипт нужен чтобы дать загрузиться СУБД и применить миграции:

```
#!/bin/sh

if [ "$DATABASE" = "postgres" ]
then
    # если база еще не запущена
    echo "DB not yet run..."

    # Проверяем доступность хоста и порта
    while ! nc -z $POSTGRES_HOST $POSTGRES_PORT; do
      sleep 0.1
    done

    echo "DB did run."
fi
# Удаляем все старые данные, чтобы сохранить данные
python manage.py flush --no-input
# Выполняем миграции
python manage.py migrate

exec "$@"
```

`docker-compose.yml` для разработки:

```
version: '3.8'

services:
  web:
    build: ./app
    command: python manage.py runserver 0.0.0.0:8000
    volumes:
      - ./app/:/usr/src/app/
    ports:
      - 8000:8000
    env_file:
      - ./.env.dev
    depends_on:
      - db  

  db:
    # Образ и версия базы, которую мы будем использовать
    image: postgres:12.0-alpine
    # Внешний том(volume) и место где он будет подключен внутри контейнера
    volumes:
      - postgres_volume:/var/lib/postgresql/data/
    environment:
      # Учетные данные(их пример):
      - POSTGRES_USER=user
      - POSTGRES_PASSWORD=password
      - POSTGRES_DB=my_db

volumes:
  postgres_volume:
```

Здесь мы создаем 2 контейнера: с Django на порту 8000, который пробрасываем наружу, подгружаем переменные окружения из файла `.env.dev` и контейнер с Postgre. Если не описывать volume для контейнера с базой, каждое пересоздание контейнера приведет к уничтожению базы и данных. Поэтому мы описали создание внешнего тома Docker `postgres_volume`, который будет хранить данные на случай пересоздания контейнера.

Файл с переменными окружения `.env.dev` для разработки:

```
DEBUG=1
SECRET_KEY=my_topsecret_key
ALLOWED_HOSTS=localhost 127.0.0.1 [::1]
DATABASE=postgres
POSTGRES_ENGINE=django.db.backends.postgresql
POSTGRES_DB=django_db
POSTGRES_USER=user
POSTGRES_PASSWORD=password
POSTGRES_HOST=db
POSTGRES_PORT=5432
```
Для запуска сервера достаточно выполнить команду:
```
docker-compose up -d --build
```
которая соберет и поднимет контейнеры на основании инструкций в `Dockerfile` и `docker-compose.yml`
Теперь можно открыть `http://127.0.0.1` и убедиться что проект работает. 

Выполним миграции в БД:
```
docker-compose exec web python manage.py migrate --noinput
```